<!DOCTYPE HTML>
<html>
  <head>
    <title>Lunr Sandbox</title>

    <!-- Lunr -->
    <script src="/src/lunr.js" type="text/javascript" charset="utf-8"></script>
    <script src="/src/utils.js" type="text/javascript" charset="utf-8"></script>
    <script src="/src/deferred.js" type="text/javascript" charset="utf-8"></script>
    <script src="/src/trie.js" type="text/javascript" charset="utf-8"></script>
    <script src="/src/index.js" type="text/javascript" charset="utf-8"></script>
    <script src="/src/document.js" type="text/javascript" charset="utf-8"></script>
    <script src="/src/word.js" type="text/javascript" charset="utf-8"></script>

    <script type="text/javascript" charset="utf-8">

      // bbc news reports from the 9th June 2011
      var objs = [{
        ref: 1,
        title: "UN nuclear watchdog refers Syria to Security Council",
        body: "The UN nuclear watchdog is to report Syria to the Security Council over its alleged covert nuclear programme."
      },{
        ref: 2,
        title: "David Cameron rejects Archbishop of Canterbury's claims",
        body: "Prime Minister David Cameron has mounted a robust defence of government policy following criticisms by the Archbishop of Canterbury."
      },{
        ref: 3,
        title: "Attorney general rules against Dr David Kelly inquest",
        body: "The attorney general has rejected calls for an inquest into the death in 2003 of government scientist Dr David Kelly"
      },{
        ref: 4,
        title: "London Olympics 2012: Air quality row may hit games",
        body: "The UK is set to miss EU targets on air quality, government documents say - which may mean a legal row just before the London Olympic Games."
      },{
        ref: 5,
        title: "Students hit by more exam errors",
        body: "England's exams watchdog is investigating a total of six mistakes in exams taken by tens of thousands of students."
      },{
        ref: 6,
        title: "Bruce Forsyth knighthood heads Queen's Birthday Honours",
        body: "Entertainer Bruce Forsyth says he is very proud after being knighted in the Queen's Birthday Honours."
      },{
        ref: 7,
        title: "Prince William in first Trooping the Colour parade",
        body: "The Duke of Cambridge has helped the Queen celebrate her official birthday by taking part in his first Trooping the Colour parade."
      },{
        ref: 8,
        title: "East Africa embassy bomber Fazul Abdullah Mohammed killed",
        body: "Fazul Abdullah Mohammed, who is suspected of masterminding the 1998 US embassy bombings in East Africa, has been killed in the Somali capital, Mogadishu, reports say."
      },{
        ref: 9,
        title: "Government to review school cuts for academy programme",
        body: "The government is reviewing the amount of funding it plans to cut from council budgets as increasing number of schools become academies."
      },{
        ref: 10,
        title: "Ed Balls faces more document leaks",
        body: "A document by civil servants urging spending restraint from the Labour government in 2006 is among more of Ed Balls' leaked, private papers published by the Daily Telegraph."
      },{
        ref: 11,
        title: "Andrew Strauss and Alastair Cook lead Birthday Honours list",
        body: "Cricketers Andrew Strauss and Alastair Cook are among the sports stars named in the Queen's Birthday Honours list."
      },{
        ref: 12,
        title: "John Steele had to go, says RFU chairman Martyn Thomas",
        body: "Fresh information about John Steele's leadership of the RFU led to a unanimous vote of no confidence in the chief executive, it has been revealed."
      },{
        ref: 13,
        title: "Jordan Henderson plays down fears of burnout",
        body: "Liverpool's new signing Jordan Henderson has dismissed concerns over fatigue ahead of playing for England at the European Under-21 Championship."
      },{
        ref: 14,
        title: "Ballet star Carlos Acosta admits O2 Arena challenges",
        body: "Ballet star Carlos Acosta has admitted there will be challenges staging Romeo and Juliet at the O2."
      },{
        ref: 15,
        title: "Isle of Wight Festival kicks off season",
        body: "The summer music festival season is set to kick off as revellers head to the Isle of Wight Festival this weekend."
      },{
        ref: 16,
        title: "Deadly blasts at market in Pakistani city of Peshawar",
        body: "At least 32 people have been killed and 90 wounded after two explosions ripped through a market in the north-western Pakistani city of Peshawar, police say.  The blasts occurred just after midnight in an area of the city that is home to political offices and army housing."
      },{
        ref: 17,
        title: "Syria: Thousands still fleeing into Turkey",
        body: "At least 4,300 people have now fled violence in Syria to seek refuge in Turkey, a senior Turkish official says.  A BBC correspondent on the border says the real number of displaced people is probably much higher."
      },{
        ref: 18,
        title: "Michael Gove denies U-turn over school spending cuts",
        body: "The education secretary has denied making a U-turn after agreeing to review funding cuts for councils.  Michael Gove said they were 'accelerating the pace of reform' and the review was needed because of the growth in academies."
      },{
        ref: 19,
        title: "Slutwalk London: 'Yes means yes and no means no'",
        body: "Men in hard hats paused from digging up Piccadilly to watch in stunned silence as the provocative procession marched past.  But they would not have dared to wolf whistle as women in stockings, bras and basques passed, clutching banners with statements like 'cleavage is not consent'.",
        url: "http://www.bbc.co.uk/news/uk-13739876"
      },{
        ref: 20,
        title: "Lily Allen is married in Cranham village church",
        body: "Pop star Lily Allen's wedding has taken place at a village church near to her country home in Gloucestershire.  The 26-year-old singer married Sam Cooper at St James the Great church in Cranham near Stroud.",
        url: "http://www.bbc.co.uk/news/uk-england-gloucestershire-13738215"
      }]

      // news has good data

      var idx = Lunr("ollie", function () {
        this.ref('ref')
        this.field('title', {'multiplier': 10})
        this.field('body')
      })

      var load = function () {
        objs.forEach(function (obj) {
          idx.add(obj)
        })
        console.log('done')
      }

      var search = function (term) {
        return idx.search(term).map(function (id) {
          return objs.filter(function (obj) {
            return obj.ref === id
          })[0]
        })
      }

      // function load () {
      //   var obj = objs.pop()
      //   console.log('adding', obj)
      //   idx.add(obj).then(function () {
      //     if (objs.length) load()
      //   })
      // }

    </script>

  </head>
  <body>
  </body>
</html>